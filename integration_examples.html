<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CS2 Players Widget - –ü—Ä–∏–º–µ—Ä—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏</title>
    <style>
        /* –°—Ç–∏–ª—å 1: –ü—Ä–æ—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫ */
        .cs2-widget-simple {
            font-family: Arial, sans-serif;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            max-width: 400px;
            background: #f9f9f9;
        }

        .cs2-widget-simple h3 {
            margin: 0 0 10px 0;
            color: #333;
        }

        .cs2-widget-simple .server-info {
            font-size: 0.9em;
            color: #666;
            margin-bottom: 10px;
        }

        .cs2-widget-simple .player {
            display: flex;
            justify-content: space-between;
            padding: 5px 0;
            border-bottom: 1px solid #eee;
        }

        .cs2-widget-simple .player:last-child {
            border-bottom: none;
        }

        /* –°—Ç–∏–ª—å 2: –ö–∞—Ä—Ç–æ—á–Ω—ã–π –¥–∏–∑–∞–π–Ω */
        .cs2-widget-card {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 15px;
            padding: 20px;
            max-width: 500px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .cs2-widget-card h3 {
            margin: 0 0 15px 0;
            font-size: 1.5em;
        }

        .cs2-widget-card .server-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 15px;
            font-size: 0.9em;
        }

        .cs2-widget-card .players-list {
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            padding: 10px;
        }

        .cs2-widget-card .player {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid rgba(255,255,255,0.2);
        }

        .cs2-widget-card .player:last-child {
            border-bottom: none;
        }

        .cs2-widget-card .player-name {
            font-weight: bold;
        }

        .cs2-widget-card .player-score {
            background: rgba(255,255,255,0.2);
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.8em;
        }

        /* –°—Ç–∏–ª—å 3: –ú–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π */
        .cs2-widget-minimal {
            font-family: monospace;
            background: #1a1a1a;
            color: #00ff00;
            padding: 15px;
            border-radius: 5px;
            max-width: 400px;
            font-size: 0.9em;
        }

        .cs2-widget-minimal .title {
            color: #ffff00;
            margin-bottom: 10px;
        }

        .cs2-widget-minimal .status {
            color: #00ffff;
            margin-bottom: 10px;
        }

        /* –û–±—â–∏–µ —Å—Ç–∏–ª–∏ */
        .loading {
            text-align: center;
            color: #666;
            font-style: italic;
        }

        .error {
            color: #ff4444;
            font-weight: bold;
        }

        .refresh-time {
            font-size: 0.8em;
            color: #888;
            margin-top: 10px;
        }

        /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –ø—Ä–∏–º–µ—Ä–æ–≤ */
        .examples-container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            padding: 20px;
        }

        .example {
            margin-bottom: 30px;
        }

        .example h2 {
            margin-bottom: 10px;
            color: #333;
        }
    </style>
</head>
<body>
    <h1>CS2 Players Monitor - –ü—Ä–∏–º–µ—Ä—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏</h1>
    <p><strong>–ó–∞–º–µ–Ω–∏—Ç–µ URL</strong> –≤ –∫–æ–¥–µ –Ω–∞ –≤–∞—à —Ä–µ–∞–ª—å–Ω—ã–π URL –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –≤ Vercel!</p>

    <div class="examples-container">
        <!-- –ü—Ä–∏–º–µ—Ä 1: –ü—Ä–æ—Å—Ç–æ–π –≤–∏–¥–∂–µ—Ç -->
        <div class="example">
            <h2>–ü—Ä–∏–º–µ—Ä 1: –ü—Ä–æ—Å—Ç–æ–π –≤–∏–¥–∂–µ—Ç</h2>
            <div id="widget-simple" class="cs2-widget-simple">
                <div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
            </div>
        </div>

        <!-- –ü—Ä–∏–º–µ—Ä 2: –ö–∞—Ä—Ç–æ—á–Ω—ã–π –¥–∏–∑–∞–π–Ω -->
        <div class="example">
            <h2>–ü—Ä–∏–º–µ—Ä 2: –ö–∞—Ä—Ç–æ—á–Ω—ã–π –¥–∏–∑–∞–π–Ω</h2>
            <div id="widget-card" class="cs2-widget-card">
                <div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
            </div>
        </div>

        <!-- –ü—Ä–∏–º–µ—Ä 3: –ú–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π -->
        <div class="example">
            <h2>–ü—Ä–∏–º–µ—Ä 3: –¢–µ—Ä–º–∏–Ω–∞–ª—å–Ω—ã–π —Å—Ç–∏–ª—å</h2>
            <div id="widget-minimal" class="cs2-widget-minimal">
                <div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
            </div>
        </div>
    </div>

    <script>
        // ‚ö†Ô∏è –ó–ê–ú–ï–ù–ò–¢–ï –ù–ê –í–ê–® –†–ï–ê–õ–¨–ù–´–ô URL –ü–û–°–õ–ï –î–ï–ü–õ–û–Ø!
        const API_BASE = 'https://your-site.vercel.app';
        const SERVER_IP = '46.174.49.96';
        const SERVER_PORT = '27015';

        // –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
        async function fetchCS2Data() {
            try {
                const response = await fetch(
                    `${API_BASE}/api/players?server_ip=${SERVER_IP}&server_port=${SERVER_PORT}`
                );
                
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}`);
                }
                
                const data = await response.json();
                
                if (data.success) {
                    return data;
                } else {
                    throw new Error(data.error || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞');
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö CS2:', error);
                throw error;
            }
        }

        // –í–∏–¥–∂–µ—Ç 1: –ü—Ä–æ—Å—Ç–æ–π
        function updateSimpleWidget(data) {
            const widget = document.getElementById('widget-simple');
            
            let html = `
                <h3>üéÆ ${data.server_info.name}</h3>
                <div class="server-info">
                    üìç ${data.server_info.map} | üë• ${data.server_info.players}
                </div>
            `;
            
            if (data.players.length === 0) {
                html += '<div>–ù–µ—Ç –∏–≥—Ä–æ–∫–æ–≤ –æ–Ω–ª–∞–π–Ω</div>';
            } else {
                data.players.forEach((player, index) => {
                    html += `
                        <div class="player">
                            <span>${index + 1}. ${player.name}</span>
                            <span>${player.score} –æ—á–∫–æ–≤</span>
                        </div>
                    `;
                });
            }
            
            html += `<div class="refresh-time">–û–±–Ω–æ–≤–ª–µ–Ω–æ: ${new Date().toLocaleTimeString()}</div>`;
            widget.innerHTML = html;
        }

        // –í–∏–¥–∂–µ—Ç 2: –ö–∞—Ä—Ç–æ—á–Ω—ã–π
        function updateCardWidget(data) {
            const widget = document.getElementById('widget-card');
            
            let html = `
                <h3>üéÆ ${data.server_info.name}</h3>
                <div class="server-stats">
                    <div>üó∫Ô∏è –ö–∞—Ä—Ç–∞: ${data.server_info.map}</div>
                    <div>üë• –ò–≥—Ä–æ–∫–∏: ${data.server_info.players}</div>
                    <div>üéØ –í–µ—Ä—Å–∏—è: ${data.server_info.version}</div>
                    <div>üõ°Ô∏è VAC: ${data.server_info.vac_enabled ? '–í–∫–ª' : '–í—ã–∫–ª'}</div>
                </div>
                <div class="players-list">
            `;
            
            if (data.players.length === 0) {
                html += '<div>üö´ –ù–µ—Ç –∏–≥—Ä–æ–∫–æ–≤ –æ–Ω–ª–∞–π–Ω</div>';
            } else {
                html += '<div style="margin-bottom: 10px; font-weight: bold;">–ò–≥—Ä–æ–∫–∏ –æ–Ω–ª–∞–π–Ω:</div>';
                data.players.forEach((player, index) => {
                    html += `
                        <div class="player">
                            <div>
                                <span class="player-name">${player.name}</span>
                                <div style="font-size: 0.8em; opacity: 0.8;">${player.duration_formatted}</div>
                            </div>
                            <span class="player-score">${player.score}</span>
                        </div>
                    `;
                });
            }
            
            html += `</div>`;
            widget.innerHTML = html;
        }

        // –í–∏–¥–∂–µ—Ç 3: –ú–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π
        function updateMinimalWidget(data) {
            const widget = document.getElementById('widget-minimal');
            
            let html = `
                <div class="title">== CS2 SERVER STATUS ==</div>
                <div class="status">Server: ${data.server_info.name}</div>
                <div class="status">Map: ${data.server_info.map}</div>
                <div class="status">Players: ${data.server_info.players}</div>
                <div>--------------------------</div>
            `;
            
            if (data.players.length === 0) {
                html += '<div>No players online</div>';
            } else {
                data.players.forEach((player, index) => {
                    html += `<div>${String(index + 1).padStart(2, '0')}. ${player.name.padEnd(20)} ${player.score}</div>`;
                });
            }
            
            html += `<div>--------------------------</div>`;
            html += `<div style="color: #888;">Last update: ${new Date().toLocaleTimeString()}</div>`;
            
            widget.innerHTML = html;
        }

        // –ü–æ–∫–∞–∑ –æ—à–∏–±–∫–∏
        function showError(widgetId, error) {
            const widget = document.getElementById(widgetId);
            widget.innerHTML = `<div class="error">‚ùå –û—à–∏–±–∫–∞: ${error.message}</div>`;
        }

        // –ì–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
        async function updateAllWidgets() {
            try {
                const data = await fetchCS2Data();
                updateSimpleWidget(data);
                updateCardWidget(data);
                updateMinimalWidget(data);
            } catch (error) {
                showError('widget-simple', error);
                showError('widget-card', error);
                showError('widget-minimal', error);
            }
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        document.addEventListener('DOMContentLoaded', function() {
            // –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
            updateAllWidgets();
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
            setInterval(updateAllWidgets, 30000);
        });
    </script>

    <hr style="margin: 40px 0;">
    
    <h2>üìã –ì–æ—Ç–æ–≤—ã–π –∫–æ–¥ –¥–ª—è –≤–∞—à–µ–≥–æ —Å–∞–π—Ç–∞</h2>
    
    <h3>üîπ –ü—Ä–æ—Å—Ç–æ–π –≤–∏–¥–∂–µ—Ç (—Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –≤—Å—Ç–∞–≤—å—Ç–µ):</h3>
    <textarea style="width: 100%; height: 200px; font-family: monospace;">
<!-- CS2 Players Widget -->
<div id="cs2-players" style="font-family: Arial, sans-serif; border: 1px solid #ddd; border-radius: 8px; padding: 15px; max-width: 400px; background: #f9f9f9;">
    <div>–ó–∞–≥—Ä—É–∑–∫–∞ –∏–≥—Ä–æ–∫–æ–≤ CS2...</div>
</div>

<script>
async function loadCS2Players() {
    try {
        // ‚ö†Ô∏è –ó–ê–ú–ï–ù–ò–¢–ï URL –ù–ê –í–ê–®!
        const response = await fetch('https://your-site.vercel.app/api/players?server_ip=46.174.49.96&server_port=27015');
        const data = await response.json();
        
        const widget = document.getElementById('cs2-players');
        
        if (data.success) {
            let html = `<h3>üéÆ ${data.server_info.name}</h3>`;
            html += `<div style="font-size: 0.9em; color: #666; margin-bottom: 10px;">üìç ${data.server_info.map} | üë• ${data.server_info.players}</div>`;
            
            if (data.players.length === 0) {
                html += '<div>–ù–µ—Ç –∏–≥—Ä–æ–∫–æ–≤ –æ–Ω–ª–∞–π–Ω</div>';
            } else {
                data.players.forEach((player, index) => {
                    html += `<div style="display: flex; justify-content: space-between; padding: 5px 0; border-bottom: 1px solid #eee;">`;
                    html += `<span>${index + 1}. ${player.name}</span>`;
                    html += `<span>${player.score} –æ—á–∫–æ–≤</span>`;
                    html += `</div>`;
                });
            }
            
            widget.innerHTML = html;
        } else {
            widget.innerHTML = `<div style="color: #ff4444;">‚ùå –û—à–∏–±–∫–∞: ${data.error}</div>`;
        }
    } catch (error) {
        document.getElementById('cs2-players').innerHTML = `<div style="color: #ff4444;">‚ùå –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è</div>`;
    }
}

// –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
document.addEventListener('DOMContentLoaded', loadCS2Players);

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
setInterval(loadCS2Players, 30000);
</script>
    </textarea>

    <h3>üîπ PHP –ø—Ä–∏–º–µ—Ä:</h3>
    <textarea style="width: 100%; height: 150px; font-family: monospace;">
<?php
function getCS2Players() {
    // ‚ö†Ô∏è –ó–ê–ú–ï–ù–ò–¢–ï URL –ù–ê –í–ê–®!
    $url = "https://your-site.vercel.app/api/players?server_ip=46.174.49.96&server_port=27015";
    
    $context = stream_context_create([
        'http' => ['timeout' => 10]
    ]);
    
    $response = file_get_contents($url, false, $context);
    
    if ($response === false) {
        return ['success' => false, 'error' => '–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è'];
    }
    
    return json_decode($response, true);
}

$data = getCS2Players();

if ($data['success']) {
    echo "<h3>üéÆ " . htmlspecialchars($data['server_info']['name']) . "</h3>";
    echo "<p>üìç " . htmlspecialchars($data['server_info']['map']) . " | üë• " . htmlspecialchars($data['server_info']['players']) . "</p>";
    
    if (count($data['players']) === 0) {
        echo "<p>–ù–µ—Ç –∏–≥—Ä–æ–∫–æ–≤ –æ–Ω–ª–∞–π–Ω</p>";
    } else {
        echo "<ul>";
        foreach ($data['players'] as $index => $player) {
            echo "<li>" . htmlspecialchars($player['name']) . " - " . $player['score'] . " –æ—á–∫–æ–≤</li>";
        }
        echo "</ul>";
    }
} else {
    echo "<p style='color: red;'>‚ùå –û—à–∏–±–∫–∞: " . htmlspecialchars($data['error']) . "</p>";
}
?>
    </textarea>

    <p><strong>üéØ –ù–µ –∑–∞–±—É–¥—å—Ç–µ:</strong></p>
    <ul>
        <li>‚úÖ –ó–∞–º–µ–Ω–∏—Ç—å <code>https://your-site.vercel.app</code> –Ω–∞ –≤–∞—à —Ä–µ–∞–ª—å–Ω—ã–π URL</li>
        <li>‚úÖ –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∏–∑–º–µ–Ω–∏—Ç—å IP –∏ –ø–æ—Ä—Ç —Å–µ—Ä–≤–µ—Ä–∞</li>
        <li>‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Å—Ç–∏–ª–∏ –ø–æ–¥ –≤–∞—à –¥–∏–∑–∞–π–Ω</li>
    </ul>
</body>
</html> 